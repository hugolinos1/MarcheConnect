
{
  "entities": {
    "MarketConfiguration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MarketConfiguration",
      "type": "object",
      "description": "Configuration settings specific to a single edition of the annual market, allowing for yearly variability and administrative control over global market parameters.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MarketConfiguration entity."
        },
        "marketYear": {
          "type": "number",
          "description": "The specific calendar year for which this market configuration applies (e.g., 2024). This helps segment data annually."
        },
        "editionNumber": {
          "type": "string",
          "description": "The ordinal number or name of this market edition (e.g., '1ère édition', 'Édition Spéciale Noël'). This can be displayed on the website."
        },
        "posterImageUrl": {
          "type": "string",
          "description": "URL to the hosted image of the main promotional poster for this market edition, displayed on the main page.",
          "format": "uri"
        },
        "notificationEmail": {
          "type": "string",
          "description": "The email address where administrator notifications are sent and which is placed in CC for exhibitor communications.",
          "format": "email"
        },
        "preRegistrationStartDate": {
          "type": "string",
          "description": "The date and time when the initial pre-registration form (Form 1) becomes available to exhibitors.",
          "format": "date-time"
        },
        "preRegistrationEndDate": {
          "type": "string",
          "description": "The date and time when the initial pre-registration form (Form 1) closes and no new applications are accepted.",
          "format": "date-time"
        },
        "detailedInformationDeadline": {
          "type": "string",
          "description": "The final deadline for accepted exhibitors to submit their detailed information via Form 2.",
          "format": "date-time"
        },
        "currentMarket": {
          "type": "boolean",
          "description": "A flag indicating if this market configuration is currently the active one for the website."
        },
        "priceTable1": {
          "type": "number",
          "description": "Price for 1 table (1.75m)."
        },
        "priceTable2": {
          "type": "number",
          "description": "Price for 2 tables (3.50m)."
        },
        "priceMeal": {
          "type": "number",
          "description": "Price per Sunday lunch meal."
        },
        "priceElectricity": {
          "type": "number",
          "description": "Price for electricity option."
        },
        "saturdayDate": {
          "type": "string",
          "description": "La date du samedi (ex: 5/12/2026)"
        },
        "saturdayHours": {
          "type": "string",
          "description": "Les horaires du samedi (ex: 14h à 19h)"
        },
        "sundayDate": {
          "type": "string",
          "description": "La date du dimanche (ex: 06/12/2026)"
        },
        "sundayHours": {
          "type": "string",
          "description": "Les horaires du dimanche (ex: 10h à 17h30)"
        }
      },
      "required": [
        "id",
        "marketYear",
        "editionNumber",
        "posterImageUrl",
        "currentMarket"
      ]
    },
    "PreRegistration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PreRegistration",
      "type": "object",
      "description": "Represents an initial pre-registration application submitted by a potential exhibitor for a specific market edition (Form 1).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the PreRegistration entity."
        },
        "marketConfigurationId": {
          "type": "string",
          "description": "Reference to MarketConfiguration. (Relationship: MarketConfiguration 1:N PreRegistration)"
        },
        "applicantName": {
          "type": "string",
          "description": "The full name of the primary contact person for this application."
        },
        "companyName": {
          "type": "string",
          "description": "The name of the company or organization applying."
        },
        "email": {
          "type": "string",
          "description": "The contact email address for the applicant.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The contact phone number for the applicant."
        },
        "productCategory": {
          "type": "string",
          "description": "A description or category of the products/services the exhibitor intends to offer (e.g., 'Artisanat', 'Produits du terroir', 'Créations artistiques')."
        },
        "boothSizePreference": {
          "type": "string",
          "description": "The preferred size or type of booth requested by the exhibitor (e.g., 'Petit stand (2x2m)', 'Grand stand (4x3m)', 'Espace extérieur')."
        },
        "applicationDate": {
          "type": "string",
          "description": "The date and time when the pre-registration application was submitted.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The current status of the pre-registration application (e.g., 'PENDING', 'ACCEPTED', 'REJECTED')."
        },
        "rejectionJustification": {
          "type": "string",
          "description": "A detailed explanation or reason for the rejection of the application, potentially generated with AI assistance."
        },
        "initialEmailSentAt": {
          "type": "string",
          "description": "The date and time when the initial email regarding the application status (acceptance or rejection) was sent to the applicant.",
          "format": "date-time"
        },
        "detailedFormLinkHash": {
          "type": "string",
          "description": "A unique hash or token used to generate a secure, one-time link for accepted applicants to access the detailed information form (Form 2)."
        }
      },
      "required": [
        "id",
        "marketConfigurationId",
        "applicantName",
        "email",
        "phone",
        "productCategory",
        "applicationDate",
        "status"
      ]
    },
    "AdminRole": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AdminRole",
      "type": "object",
      "description": "Represents a user with administrative privileges in the system.",
      "properties": {
        "addedAt": {
          "type": "string",
          "description": "The date and time when the administrator access was granted.",
          "format": "date-time"
        }
      }
    },
    "AdminRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AdminRequest",
      "type": "object",
      "description": "A request from a user to become an administrator.",
      "properties": {
        "email": { "type": "string" },
        "requestedAt": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["PENDING", "APPROVED", "REJECTED"] }
      }
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/roles_admin/{adminId}",
        "definition": {
          "entityName": "AdminRole",
          "schema": {
            "$ref": "#/backend/entities/AdminRole"
          },
          "description": "Dedicated collection for storing UIDs of users granted administrative privileges.",
          "params": [
            {
              "name": "adminId",
              "description": "The unique Firebase Authentication UID of an administrator."
            }
          ]
        }
      },
      {
        "path": "/admin_requests/{requestId}",
        "definition": {
          "entityName": "AdminRequest",
          "schema": {
            "$ref": "#/backend/entities/AdminRequest"
          },
          "description": "Requests for admin access.",
          "params": [
            {
              "name": "requestId",
              "description": "The UID of the user requesting access."
            }
          ]
        }
      },
      {
        "path": "/market_configurations/{marketConfigId}",
        "definition": {
          "entityName": "MarketConfiguration",
          "schema": {
            "$ref": "#/backend/entities/MarketConfiguration"
          },
          "description": "Annual configurations for the market.",
          "params": [
            {
              "name": "marketConfigId",
              "description": "The unique identifier for a specific market configuration."
            }
          ]
        }
      },
      {
        "path": "/pre_registrations/{preRegistrationId}",
        "definition": {
          "entityName": "PreRegistration",
          "schema": {
            "$ref": "#/backend/entities/PreRegistration"
          },
          "description": "Initial pre-registration applications.",
          "params": [
            {
              "name": "preRegistrationId",
              "description": "The unique identifier for a pre-registration application."
            }
          ]
        }
      },
      {
        "path": "/exhibitor_details/{exhibitorDetailId}",
        "definition": {
          "entityName": "ExhibitorDetail",
          "schema": {
            "$ref": "#/backend/entities/ExhibitorDetail"
          },
          "description": "Comprehensive detailed information submitted by accepted exhibitors.",
          "params": [
            {
              "name": "exhibitorDetailId",
              "description": "The unique identifier for an exhibitor's detailed information entry."
            }
          ]
        }
      }
    ]
  }
}
